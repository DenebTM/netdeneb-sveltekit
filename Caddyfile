:80 {
  encode gzip zstd

  root * /

  handle /files* {
    file_server browse
  }

  basicauth /files/priv* {
    # <username> <`caddy hash-password`>
  }

  @serve {
    path /img/* /thumbs/* /art/*
  }
  handle @serve {
    file_server
  }

  redir /ftpfile /files{uri}
  redir /getfile /files{uri}

  reverse_proxy localhost:3000
}
